@(
groupId: String,
addDocumentation: Boolean
)
package @groupId

import cats.effect.{ExitCode, IO, IOApp}
import sttp.tapir.server.netty.NettyCatsServer

import scala.io.StdIn

object Main extends IOApp {

  override def run(args: List[String]): IO[ExitCode] = {
    NettyCatsServer
      .io()
      .use { server =>
        for {
          bind <- server
            .port(8080)
            .host("localhost")
            .addEndpoints(@if(addDocumentation) {Endpoints.helloServerEndpoint :: Endpoints.docEndpoints} else {List(Endpoints.helloServerEndpoint)})
            .start()
          _ <- IO(StdIn.readLine())
          _ <- bind.stop()
        } yield bind
      }
      .as(ExitCode.Success)

  }
}
