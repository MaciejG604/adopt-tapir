@(groupId: String)
package @groupId

import java.time.LocalDateTime
import java.time.format.DateTimeFormatter
import sttp.tapir.server.ziohttp.ZioHttpInterpreter
import zio.{Cause, FiberId, FiberRefs, LogLevel, LogSpan, Trace, ZLogger}

object Logger:
  val zLogger: ZLogger[String, Unit] =
    (
        trace: Trace,
        fiberId: FiberId,
        logLevel: LogLevel,
        message: () => String,
        cause: Cause[Any],
        context: FiberRefs,
        spans: List[LogSpan],
        annotations: Map[String, String]
    ) =>

      val formatter = DateTimeFormatter.ofPattern("HH:mm:ss.SSS")
      val time = LocalDateTime.now().format(formatter)
      val logName = ZioHttpInterpreter.getClass.getName

      println(s"$time [${Thread.currentThread.getName}] ${logLevel.label} $logName - ${message()}")
